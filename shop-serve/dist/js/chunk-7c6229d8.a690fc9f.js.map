{"version":3,"sources":["webpack:///./src/views/List.vue?5475","webpack:///src/views/List.vue","webpack:///./src/views/List.vue?b750","webpack:///./src/views/List.vue?a71c","webpack:///./src/views/List.vue?ef08"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","_l","item","index","key","type","class","con","num","on","$event","checkout","_v","_s","attrs","list","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,IAAI,MAAMC,YAAY,OAAOP,EAAIQ,GAAIR,EAAc,YAAE,SAASS,EAAKC,GAAO,OAAON,EAAG,KAAK,CAACO,IAAIF,EAAKG,KAAKC,MAAM,CAACC,IAAId,EAAIe,KAAKL,GAAOM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,SAASR,MAAU,CAACV,EAAImB,GAAGnB,EAAIoB,GAAGX,EAAKG,YAAW,GAAGR,EAAG,MAAM,CAACE,IAAI,cAAcN,EAAIQ,GAAIR,EAAc,YAAE,SAASS,GAAM,OAAOL,EAAG,MAAM,CAACO,IAAIF,EAAKG,KAAKL,YAAY,SAAS,CAACH,EAAG,KAAK,CAACG,YAAY,eAAe,CAACP,EAAImB,GAAGnB,EAAIoB,GAAGX,EAAKG,SAASR,EAAG,OAAO,CAACiB,MAAM,CAAC,KAAOZ,EAAKa,SAAS,MAAK,MACpjBC,EAAkB,G,wDCoBtB,GACE,iBAAF,gBAAI,IAAJ,EAAI,OAAJ,oHACA,qDADA,OACA,EADA,OAEA,eACA,iBAHA,sCAME,kBAAF,gBAAI,IAAJ,EAAI,OAAJ,oHACA,qDADA,OACA,EADA,OAEA,iBACA,IAHA,gDAKE,KAZF,WAaI,MAAJ,CACM,KAAN,GACM,IAAN,GACM,EAAN,GACM,MAAN,IAGE,SAAF,CACI,WADJ,WAGM,IADA,IAAN,KACA,4BAEQ,IADA,IAAR,KACA,mBACU,GAAV,kCACY,EAAZ,2BACY,GAAZ,EACY,MAGZ,GACU,EAAV,MACY,KAAZ,sBACY,KAAZ,iBAIM,OAAN,IAGE,QA1CF,WA0CI,IAAJ,OACI,KAAJ,SACI,OAAJ,sCACM,EAAN,qBAGE,QAAF,CACI,SADJ,SACA,GAAM,IAAN,OACM,KAAN,MACM,IAAN,+CACA,eACA,GACM,KAAN,QACM,OAAN,OAAM,CAAN,2BACQ,EAAR,YAGI,OAXJ,WAsBM,IAVA,IAAN,EACA,oBACA,4BACA,sCACA,wBAGA,EACA,4DAEA,6BAEQ,IAAR,0BACA,aACA,6CAGQ,GAAR,gCACU,KAAV,IACU,KAAV,WACU,WCrGoU,I,wBCQ1UC,EAAY,eACd,EACAzB,EACAwB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,kECnBf,yBAAme,EAAG","file":"js/chunk-7c6229d8.a690fc9f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{ref:\"nav\",staticClass:\"nav\"},_vm._l((_vm.floor_list),function(item,index){return _c('li',{key:item.type,class:{con:_vm.num==index},on:{\"click\":function($event){return _vm.checkout(index)}}},[_vm._v(_vm._s(item.type))])}),0),_c('div',{ref:\"floor_view\"},_vm._l((_vm.floor_list),function(item){return _c('div',{key:item.type,staticClass:\"floor\"},[_c('h2',{staticClass:\"floor_title\"},[_vm._v(_vm._s(item.type))]),_c('list',{attrs:{\"list\":item.list}})],1)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <ul class=\"nav\" ref=\"nav\">\r\n            <li\r\n                v-for=\"(item,index) in floor_list\"\r\n                :class=\"{con:num==index}\"\r\n                :key=\"item.type\"\r\n                @click=\"checkout(index)\"\r\n            >{{item.type}}</li>\r\n        </ul>\r\n        <div ref=\"floor_view\">\r\n            <div class=\"floor\" v-for=\"item in floor_list\" :key=\"item.type\">\r\n                <h2 class=\"floor_title\">{{item.type}}</h2>\r\n                <list :list=\"item.list\"></list>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ajax from \"../plugins/ajax\";\r\nimport scrollTo from \"../plugins/scrollTo\";\r\nexport default {\r\n    beforeRouteEnter: async function(to, from, next) {\r\n        var res = await $ajax(\"/goodList?type_one=\" + to.params.type);\r\n        next(vm => {\r\n            vm.list = res.data;\r\n        });\r\n    },\r\n    beforeRouteUpdate: async function(to, from, next) {\r\n        var res = await $ajax(\"/goodList?type_one=\" + to.params.type);\r\n        this.list = res.data;\r\n        next();\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n            num: \"\",\r\n            x:\"\",\r\n            flag:true\r\n        };\r\n    },\r\n    computed: {\r\n        floor_list() {\r\n            var floor_list = []; //[{type:\"\",list:[{},{}]}]\r\n            for (var i = 0; i < this.list.length; i++) {\r\n                var flag = true;\r\n                for (var j = 0; j < floor_list.length; j++) {\r\n                    if (this.list[i].type_two == floor_list[j].type) {\r\n                        floor_list[j].list.push(this.list[i]);\r\n                        flag = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (flag) {\r\n                    floor_list.push({\r\n                        type: this.list[i].type_two,\r\n                        list: [this.list[i]]\r\n                    });\r\n                }\r\n            }\r\n            return floor_list;\r\n        }\r\n    },\r\n    mounted(){\r\n        this.scroll();\r\n        window.addEventListener(\"scroll\",()=>{\r\n            this.flag?this.scroll():null;\r\n        });\r\n    },\r\n    methods: {\r\n        checkout(index) {\r\n            this.num = index;\r\n            var title = this.$refs.floor_view.getElementsByClassName(\r\n                \"floor_title\"\r\n            )[index];\r\n            this.flag=false;\r\n            scrollTo(title.offsetTop - 80,()=>{\r\n                this.flag=true;\r\n            });\r\n        },\r\n        scroll() {\r\n            var H =\r\n                window.innerHeight ||\r\n                document.body.clientHeight ||\r\n                document.documentElement.clientHeight;\r\n            var content=this.$refs.floor_view\r\n            // var nav=this.$refs.nav\r\n            // 获取页面滚动高度\r\n            var st =\r\n                document.body.scrollTop || document.documentElement.scrollTop;\r\n\r\n            for (var i = 0; i < content.children.length; i++) {\r\n                // 获取元素顶部偏移量 offsetTop\r\n                var ot = content.children[i].offsetTop;\r\n                var h = parseFloat(\r\n                    getComputedStyle(content.children[i], null).height\r\n                );\r\n\r\n                if (st >= ot - H / 2 && st + H / 2 < ot + h && i != this.x) {\r\n                    this.x = i;\r\n                    this.num=this.x;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\nh2 {\r\n    text-align: center;\r\n}\r\n.nav {\r\n    position: fixed;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    left: 10px;\r\n    width: 100px;\r\n    background: white;\r\n    padding: 10px;\r\n    border:1px solid rgb(119, 63, 119);\r\n    border-radius: 5px\r\n}\r\n.nav li {\r\n    line-height: 30px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\n.nav .con {\r\n    color: purple;\r\n    font-weight: bolder;\r\n    filter: drop-shadow(0 0 10px purple)\r\n}\r\n.nav li:hover{\r\n    color: purple;\r\n    font-weight: bolder;\r\n    filter: drop-shadow(0 0 10px purple)\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=242ec076&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=242ec076&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"242ec076\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=242ec076&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=242ec076&scoped=true&lang=css&\""],"sourceRoot":""}